
YUI.add('controller',function(Y){Y.namespace('controller');Y.controller={init:function(){this.listen();this.listenToFooter();this.listenToFeatures();this.listenToRefresh();},listen:function(){var self=this;Y.all('#stories a, #stories div').each(function(n){self.stop(n);});},listenToFeatures:function(){Y.all(".featureLink").each(function(n){n.on('click',Y.data.fetchCricinfoArticle);});},listenToNewsClose:function(overlay){Y.one(".yui3-overlay-mask").on('click',function(e){overlay.set('visible',false);});Y.one('.closeNewsOverlayBtn').on('click',function(e){overlay.set('visible',false);});},stop:function(n){n.on('click',function(e){e.preventDefault();});},listenToRefresh:function(){Y.one('#refreshBtn').on('click',function(e){e.preventDefault();Y.ui.createLoadingIndicator();Y.later(200,window.location,"reload");});},listenToVideoList:function(){Y.all('.video').each(function(n){n.on('click',function(e){var selected=Y.one('.selected');if(selected){selected.removeClass('selected');}
e.currentTarget._node.className+=' selected';Y.data.fetchVideoDetail(e.currentTarget._node.id);});});},listenToPhotoList:function(){Y.all('.thumb').each(function(n){n.on('click',function(e){var selected=Y.one('.selectedPic');if(selected){selected.removeClass('selectedPic');}
e.currentTarget._node.className+=' selectedPic';Y.data.fetchPhotoDetail(e.currentTarget._node.id);});});},listenToFooter:function(){Y.one('#videosLink').on('click',function(e){e.preventDefault();if(Y.one('.selectedLink')){Y.one('.selectedLink').removeClass('selectedLink');}
this.addClass('selectedLink');Y.ui.showVideoHead();if(Y.one("#videoWrapper")){Y.ui.showVideosBar();}
else{Y.data.fetchVideos();}});Y.one('#newsLink').on('click',function(e){e.preventDefault();if(Y.one('.selectedLink')){Y.one('.selectedLink').removeClass('selectedLink');}
this.addClass('selectedLink');Y.ui.showNewsBar();Y.ui.showNewsHead();});Y.one("#photosLink").on('click',function(e){e.preventDefault();if(Y.one('.selectedLink')){Y.one('.selectedLink').removeClass('selectedLink');}
this.addClass('selectedLink');Y.ui.showPhotoHead();if(Y.one("#photoWrapper")){Y.ui.showPhotosBar();}
else{Y.data.fetchPictures();}});}}},'1.0',{requires:['base','data','ui']});